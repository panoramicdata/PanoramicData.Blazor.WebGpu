{
  "comments": {
    "lineComment": "//",
    "blockComment": [ "/*", "*/" ]
  },
  "brackets": [
    ["{", "}"],
    ["[", "]"],
    ["(", ")"]
  ],
  "autoClosingPairs": [
    { "open": "{", "close": "}" },
    { "open": "[", "close": "]" },
    { "open": "(", "close": ")" },
    { "open": "\"", "close": "\"", "notIn": ["string"] },
    { "open": "/*", "close": "*/", "notIn": ["string"] }
  ],
  "surroundingPairs": [
    ["{", "}"],
    ["[", "]"],
    ["(", ")"],
    ["\"", "\""]
  ],
  "keywords": [
    "struct", "fn", "let", "var", "const", "override",
    "if", "else", "switch", "case", "default",
    "for", "while", "loop", "break", "continue", "return", "discard",
    "alias", "enable", "requires", "diagnostic",
    "true", "false"
  ],
  "typeKeywords": [
    "bool", "i32", "u32", "f32", "f16",
    "vec2", "vec3", "vec4",
    "vec2i", "vec3i", "vec4i",
    "vec2u", "vec3u", "vec4u",
    "vec2f", "vec3f", "vec4f",
    "vec2h", "vec3h", "vec4h",
    "mat2x2", "mat2x3", "mat2x4",
    "mat3x2", "mat3x3", "mat3x4",
    "mat4x2", "mat4x3", "mat4x4",
    "mat2x2f", "mat2x3f", "mat2x4f",
    "mat3x2f", "mat3x3f", "mat3x4f",
    "mat4x2f", "mat4x3f", "mat4x4f",
    "mat2x2h", "mat2x3h", "mat2x4h",
    "mat3x2h", "mat3x3h", "mat3x4h",
    "mat4x2h", "mat4x3h", "mat4x4h",
    "atomic", "ptr", "array",
    "texture_1d", "texture_2d", "texture_2d_array", "texture_3d",
    "texture_cube", "texture_cube_array",
    "texture_multisampled_2d",
    "texture_depth_2d", "texture_depth_2d_array", "texture_depth_cube", "texture_depth_cube_array",
    "texture_depth_multisampled_2d",
    "texture_storage_1d", "texture_storage_2d", "texture_storage_2d_array", "texture_storage_3d",
    "sampler", "sampler_comparison"
  ],
  "attributes": [
    "@vertex", "@fragment", "@compute",
    "@workgroup_size", "@builtin", "@location", "@binding", "@group",
    "@align", "@size", "@interpolate", "@invariant",
    "@const", "@must_use"
  ],
  "builtins": [
    "position", "vertex_index", "instance_index",
    "front_facing", "frag_depth", "sample_index", "sample_mask",
    "local_invocation_id", "local_invocation_index",
    "global_invocation_id", "workgroup_id", "num_workgroups"
  ],
  "functions": [
    "abs", "acos", "acosh", "all", "any", "arrayLength",
    "asin", "asinh", "atan", "atan2", "atanh",
    "ceil", "clamp", "cos", "cosh", "cross",
    "degrees", "determinant", "distance", "dot",
    "exp", "exp2", "faceForward", "floor", "fma", "fract",
    "frexp", "inverseSqrt", "ldexp", "length", "log", "log2",
    "max", "min", "mix", "modf", "normalize",
    "pow", "quantizeToF16", "radians", "reflect", "refract",
    "reverseBits", "round", "saturate", "sign", "sin", "sinh",
    "smoothstep", "sqrt", "step", "tan", "tanh", "transpose", "trunc",
    "countLeadingZeros", "countOneBits", "countTrailingZeros",
    "extractBits", "firstLeadingBit", "firstTrailingBit", "insertBits",
    "pack2x16float", "pack2x16snorm", "pack2x16unorm",
    "pack4x8snorm", "pack4x8unorm",
    "unpack2x16float", "unpack2x16snorm", "unpack2x16unorm",
    "unpack4x8snorm", "unpack4x8unorm",
    "storageBarrier", "workgroupBarrier", "workgroupUniformLoad",
    "textureLoad", "textureStore", "textureSample", "textureSampleLevel",
    "textureSampleBias", "textureSampleCompare", "textureSampleCompareLevel",
    "textureSampleGrad", "textureGather", "textureGatherCompare",
    "textureDimensions", "textureNumLayers", "textureNumLevels", "textureNumSamples",
    "atomicLoad", "atomicStore", "atomicAdd", "atomicSub", "atomicMax", "atomicMin",
    "atomicAnd", "atomicOr", "atomicXor", "atomicExchange", "atomicCompareExchangeWeak",
    "select", "arrayLength", "dot", "cross", "length", "normalize", "faceForward", "reflect"
  ],
  "storageClasses": [
    "function", "private", "workgroup", "uniform", "storage", "handle"
  ],
  "accessModes": [
    "read", "write", "read_write"
  ],
  "operators": [
    "=", ">", "<", "!", "~", "?", ":",
    "==", "<=", ">=", "!=", "&&", "||",
    "+", "-", "*", "/", "&", "|", "^", "%",
    "<<", ">>", "+=", "-=", "*=", "/=", "&=", "|=", "^=", "%=",
    "<<=", ">>="
  ],
  "symbols":  /[=><!~?:&|+\-*\/\^%]+/,
  "escapes": /\\(?:[abfnrtv\\"']|x[0-9A-Fa-f]{1,4}|u[0-9A-Fa-f]{4}|U[0-9A-Fa-f]{8})/,
  "tokenizer": {
    "root": [
      [/[a-z_$][\w$]*/, {
        "cases": {
          "@keywords": "keyword",
          "@typeKeywords": "type",
          "@functions": "function",
          "@storageClasses": "storage.type",
          "@accessModes": "storage.modifier",
          "@builtins": "variable.predefined",
          "@default": "identifier"
        }
      }],
      [/@[a-z_$][\w$]*/, {
        "cases": {
          "@attributes": "annotation",
          "@default": "annotation"
        }
      }],
      { "include": "@whitespace" },
      [/[{}()\[\]]/, "@brackets"],
      [/[<>](?!@symbols)/, "@brackets"],
      [/@symbols/, {
        "cases": {
          "@operators": "operator",
          "@default": ""
        }
      }],
      [/\d*\.\d+([eE][\-+]?\d+)?[fhiu]?/, "number.float"],
      [/0[xX][0-9a-fA-F]+[iu]?/, "number.hex"],
      [/\d+[iu]?/, "number"],
      [/[;,.]/, "delimiter"],
      [/"([^"\\]|\\.)*$/, "string.invalid"],
      [/"/, { "token": "string.quote", "bracket": "@open", "next": "@string" }]
    ],
    "comment": [
      [/[^\/*]+/, "comment"],
      [/\/\*/, "comment", "@push"],
      ["\\*/", "comment", "@pop"],
      [/[\/*]/, "comment"]
    ],
    "string": [
      [/[^\\"]+/, "string"],
      [/@escapes/, "string.escape"],
      [/\\./, "string.escape.invalid"],
      [/"/, { "token": "string.quote", "bracket": "@close", "next": "@pop" }]
    ],
    "whitespace": [
      [/[ \t\r\n]+/, "white"],
      [/\/\*/, "comment", "@comment"],
      [/\/\/.*$/, "comment"]
    ]
  }
}
